<div class="filter-container" [formGroup]="filtersForm">
  <div class="filters" formArrayName="filters">
    <div
      class="filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(0) }"
      [formGroupName]="0"
    >
      <recon-form-slider
        formControlName="value"
        label="And / Or"
        *ngIf="isSelectedAtIndex(0)"
        (changeVal)="changeValue()"
      ></recon-form-slider>
    </div>
    <div
      class="filter input-filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(1) }"
      [formGroupName]="1"
    >
      <recon-filter-input
        formControlName="value"
        label="Sensor Id"
        placeholder="Search..."
        *ngIf="isSelectedAtIndex(1)"
        (blurVal)="changeValue()"
      ></recon-filter-input>
    </div>
    <div
      class="filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(2) }"
      [formGroupName]="2"
    >
      <recon-form-range-picker
        label="Time stamp"
        *ngIf="isSelectedAtIndex(2)"
        formControlName="value"
        (changeVal)="changeValue()"
      ></recon-form-range-picker>
    </div>
    <div
      class="filter input-checkbox-filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(3) }"
      [formGroupName]="3"
    >
      <recon-filter-input-checkbox
        label="Project name"
        checkboxLabel="Not equal"
        placeholder="Search..."
        formControlName="value"
        *ngIf="isSelectedAtIndex(3)"
        (blurVal)="changeValue()"
      ></recon-filter-input-checkbox>
    </div>
    <div
      class="filter input-checkbox-filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(4) }"
      [formGroupName]="4"
    >
      <recon-filter-input-checkbox
        label="Edge Node name"
        checkboxLabel="Not equal"
        placeholder="Search..."
        formControlName="value"
        *ngIf="isSelectedAtIndex(4)"
        (blurVal)="changeValue()"
      ></recon-filter-input-checkbox>
    </div>
    <div
      class="filter input-filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(5) }"
      [formGroupName]="5"
    >
      <recon-filter-input
        formControlName="value"
        label="Event/Object"
        placeholder="Search..."
        *ngIf="isSelectedAtIndex(5)"
        (blurVal)="changeValue()"
      ></recon-filter-input>
    </div>
    <div
      class="filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(6) }"
      [formGroupName]="6"
    >
      <recon-filter-three-inputs
        label="Location XYZ, mm"
        leftLabel="X"
        middleLabel="Y"
        rightLabel="Z"
        checkboxLabel="Invert"
        formControlName="value"
        *ngIf="isSelectedAtIndex(6)"
        (blurVal)="changeValue()"
      ></recon-filter-three-inputs>
    </div>
    <div
      class="filter input-checkbox-filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(7) }"
      [formGroupName]="7"
    >
      <recon-filter-input-checkbox
        label="Orient theta"
        checkboxLabel="Invert"
        placeholder="Search..."
        formControlName="value"
        *ngIf="isSelectedAtIndex(7)"
        (blurVal)="changeValue()"
      ></recon-filter-input-checkbox>
    </div>
    <div
      class="filter input-checkbox-filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(8) }"
      [formGroupName]="8"
    >
      <recon-filter-input-checkbox
        label="Orient phi"
        checkboxLabel="Invert"
        placeholder="Search..."
        formControlName="value"
        *ngIf="isSelectedAtIndex(8)"
        (blurVal)="changeValue()"
      ></recon-filter-input-checkbox>
    </div>
    <div
      class="filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(9) }"
      [formGroupName]="9"
    >
      <recon-filter-select
        label="Traffic flow"
        formControlName="value"
        [options]="trafficFlowOptions"
        *ngIf="isSelectedAtIndex(9)"
        (changeVal)="changeValue()"
      ></recon-filter-select>
    </div>
    <div
      class="filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(10) }"
      [formGroupName]="10"
    >
      <recon-filter-select
        label="Vehicle classification"
        formControlName="value"
        [options]="vehicleOptions"
        *ngIf="isSelectedAtIndex(10)"
        (changeVal)="changeValue()"
      ></recon-filter-select>
    </div>
    <div
      class="filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(11) }"
      [formGroupName]="11"
    >
      <recon-filter-select
        label="Pedestrian transit method classification"
        formControlName="value"
        [options]="pedestrianOptions"
        *ngIf="isSelectedAtIndex(11)"
        (changeVal)="changeValue()"
      ></recon-filter-select>
    </div>
    <div
      class="filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(12) }"
      [formGroupName]="12"
    >
      <recon-filter-two-inputs
        label="Ambient temperature, C"
        formControlName="value"
        leftPlaceholder="From"
        rightPlaceholder="To"
        *ngIf="isSelectedAtIndex(12)"
        (blurVal)="changeValue()"
      ></recon-filter-two-inputs>
    </div>
    <div
      class="filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(13) }"
      [formGroupName]="13"
    >
      <recon-filter-two-inputs
        label="Road temperature, C"
        formControlName="value"
        leftPlaceholder="From"
        rightPlaceholder="To"
        *ngIf="isSelectedAtIndex(13)"
        (blurVal)="changeValue()"
      ></recon-filter-two-inputs>
    </div>
    <div
      class="filter checkbox-filter"
      [ngClass]="{ 'shown-filter': isSelectedAtIndex(14) }"
      [formGroupName]="14"
    >
      <recon-form-checkbox
        label="Tagged data"
        formControlName="value"
        *ngIf="isSelectedAtIndex(14)"
        (changeVal)="changeValue()"
      ></recon-form-checkbox>
    </div>
  </div>
  <div class="button-container">
    <button
      mat-raised-button
      color="primary"
      class="filter"
      [matMenuTriggerFor]="menu"
    >
      <img src="assets/icons/add-filter.svg" height="25" width="25" />
    </button>
    <ng-container [formGroup]="filtersForm">
      <mat-menu #menu="matMenu" xPosition="before" class="recon-menu">
        <ng-container formArrayName="filters">
          <ng-container *ngFor="let filter of filtersList; let i = index">
            <div
              class="filter-item"
              matRipple
              (click)="$event.stopPropagation(); toggleSelectValueWithIndex(i)"
              [formGroupName]="i"
            >
              <recon-form-checkbox
                formControlName="selected"
                (click)="$event.stopPropagation()"
              ></recon-form-checkbox>
              {{ filter.label }}
            </div>
            <mat-divider *ngIf="i !== filtersList.length - 1"></mat-divider>
          </ng-container>
        </ng-container>
      </mat-menu>
    </ng-container>
  </div>
</div>
