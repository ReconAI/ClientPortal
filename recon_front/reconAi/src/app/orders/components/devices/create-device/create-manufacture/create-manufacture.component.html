<div class="recon-modal-title">
  <h3>Add new manufacture</h3>
  <mat-icon [mat-dialog-close]="true">close</mat-icon>
</div>

<form [formGroup]="manufactureForm">
  <mat-form-field>
    <mat-label>Manufacturer name</mat-label>
    <input
      matInput
      placeholder="Manufacturer name"
      type="text"
      formControlName="name"
      required
      autocomplete="on"
      id="manufacturer-name"
    />
  </mat-form-field>
  <mat-form-field>
    <mat-label>VAT number</mat-label>
    <input
      matInput
      placeholder="VAT number"
      type="text"
      formControlName="vat"
      required
      autocomplete="on"
      id="vat"
    />
  </mat-form-field>
  <mat-form-field>
    <mat-label>Contact person</mat-label>
    <input
      matInput
      placeholder="Contact person"
      type="text"
      formControlName="contactPerson"
      required
      autocomplete="on"
      id="contactPerson"
    />
  </mat-form-field>
  <mat-form-field>
    <mat-label>Phone</mat-label>
    <input
      matInput
      placeholder="Phone"
      type="text"
      formControlName="phone"
      required
      autocomplete="on"
      id="phone"
    />
  </mat-form-field>
  <mat-form-field>
    <mat-label>Address</mat-label>
    <input
      matInput
      placeholder="Address"
      type="text"
      formControlName="address"
      required
      autocomplete="on"
      id="address"
    />
  </mat-form-field>
  <mat-form-field>
    <mat-label>Order email</mat-label>
    <input
      matInput
      placeholder="Order email"
      type="text"
      formControlName="orderEmail"
      required
      autocomplete="on"
      id="order-email"
    />
  </mat-form-field>
  <mat-form-field>
    <mat-label>Support email</mat-label>
    <input
      matInput
      placeholder="Support email"
      type="text"
      formControlName="supportEmail"
      required
      autocomplete="on"
      id="support-email"
    />
  </mat-form-field>
  <mat-form-field formArrayName="categories">
    <mat-chip-list #chipList>
      <mat-chip
        *ngFor="let category of categories.controls; let i = index"
        [selectable]="true"
        [removable]="true"
        (removed)="removeCategory(i)"
      >
        {{ category.value }}
        <span matChipRemove class="close-chip">&times;</span>
      </mat-chip>
      <input
        placeholder="Category"
        #categoryInput
        #trigger="matAutocompleteTrigger"
        [formControl]="categoryControl"
        [matAutocomplete]="auto"
        [matChipInputFor]="chipList"
        [matChipInputSeparatorKeyCodes]="[]"
        (keydown.enter)="$event.stopPropagation(); trigger.openPanel()"
      />
    </mat-chip-list>
    <mat-autocomplete
      [displayWith]
      #auto="matAutocomplete"
      (optionSelected)="selected($event, trigger)"
    >
      <!-- this (click) handler is used to open pop up after click on option -->
      <mat-option
        *ngFor="let category of filteredCategories"
        [value]="category"
        (click)="$event.stopPropagation(); trigger.openPanel()"
      >
        {{ category }}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>
  <button mat-raised-button color="primary" (click)="sendManufacturer()">
    SAVE
  </button>
</form>
